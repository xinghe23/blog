"use strict";(self.webpackChunkmyblog=self.webpackChunkmyblog||[]).push([[2345],{2336:(e,s)=>{s.A=(e,s)=>{const n=e.__vccOpts||e;for(const[e,a]of s)n[e]=a;return n}},6706:(e,s,n)=>{n.r(s),n.d(s,{comp:()=>r,data:()=>t});var a=n(4089);const i={},r=(0,n(2336).A)(i,[["render",function(e,s){return(0,a.uX)(),(0,a.CE)("div",null,[...s[0]||(s[0]=[(0,a.Fv)('<h1 id="nginx" tabindex="-1"><a class="header-anchor" href="#nginx"><span>Nginx</span></a></h1><p>​ Nginx (engine x) 是一个高性能的HTTP和反向代理web服务器，同时也提供了IMAP/POP3/SMTP服务。Nginx是由伊戈尔·赛索耶夫为俄罗斯访问量第二的Rambler.ru站点（俄文：Рамблер）开发的，公开版本1.19.6发布于2020年12月15日。</p><h2 id="_1-正向代理" tabindex="-1"><a class="header-anchor" href="#_1-正向代理"><span>1.正向代理</span></a></h2><p>我们平时访问外网，通常响应比较慢，比如GitHub，我们自己的网络没办法访问，找一个可以访问GitHub的本地服务器，我们通过访问本地服务器去访问GitHub。这就是正向代理。</p><h2 id="_2-反向代理" tabindex="-1"><a class="header-anchor" href="#_2-反向代理"><span>2.反向代理</span></a></h2><p>像抖音，b站这些网站，他们的数据比较多，所有不止一台服务器，但是服务器中间session不共享，如果没有反向代理，我们就需要频繁的去登录，所有他们就专门搞了一台服务器，让其对用户的请求进行转发到他们的后台服务器，这样我们就不需要频繁的去登录了，这种找一个服务器给多台服务器去转发的就是反向代理。</p><h2 id="_3-负载均衡" tabindex="-1"><a class="header-anchor" href="#_3-负载均衡"><span>3.负载均衡</span></a></h2><p>1.轮询</p><p>根据时间将请求顺序的分配到不同的服务器上<br> 如果某个服务器down掉，nginx可以将其自动踢出集群</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>upstream backserver {</span></span>\n<span class="line"><span>    server 192.168.0.14;</span></span>\n<span class="line"><span>    server 192.168.0.15;</span></span>\n<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2.加权weight</p><p>指定轮询几率，weight和访问比率成正比，用于后端服务器性能不均的 情况。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>upstream backserver {</span></span>\n<span class="line"><span>    server 192.168.0.14 weight=3;</span></span>\n<span class="line"><span>    server 192.168.0.15 weight=7;</span></span>\n<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3.ip_hash</p><p>每个请求按访问ip的hash结果分配，这样每个访客固定访问一个后端服务器，可以解决*<strong>session的问题*</strong>。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>upstream backserver {</span></span>\n<span class="line"><span>    ip_hash;</span></span>\n<span class="line"><span>    server 192.168.0.14:88;</span></span>\n<span class="line"><span>    server 192.168.0.15:80;</span></span>\n<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>4.fair</p><p>按后端服务器的响应时间来分配请求，响应时间短的优先分配。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>upstream backserver {    </span></span>\n<span class="line"><span>\tserver server1;    server server2;    fair; </span></span>\n<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.url_hash</p><p>按访问url的hash结果来分配请求，使每个url定向到同一个（对应的）后端服务器，后端服务器为缓存时比较有效。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>upstream backserver {</span></span>\n<span class="line"><span>    server squid1:3128;</span></span>\n<span class="line"><span>    server squid2:3128;</span></span>\n<span class="line"><span>    hash $request_uri;</span></span>\n<span class="line"><span>    hash_method crc32;</span></span>\n<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',22)])])}]]),t=JSON.parse('{"path":"/posts/cherry.html","title":"Nginx","lang":"zh-CN","frontmatter":{"icon":"pen-to-square","date":"2022-01-09T00:00:00.000Z","category":["樱桃"],"tag":["红","小","圆"],"description":"Nginx ​ Nginx (engine x) 是一个高性能的HTTP和反向代理web服务器，同时也提供了IMAP/POP3/SMTP服务。Nginx是由伊戈尔·赛索耶夫为俄罗斯访问量第二的Rambler.ru站点（俄文：Рамблер）开发的，公开版本1.19.6发布于2020年12月15日。 1.正向代理 我们平时访问外网，通常响应比较慢，比如G...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Nginx\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2022-01-09T00:00:00.000Z\\",\\"dateModified\\":\\"2025-09-25T10:47:06.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Mr.Hope\\",\\"url\\":\\"https://mister-hope.com\\"}]}"],["meta",{"property":"og:url","content":"https://mister-hope.github.io/blog/posts/cherry.html"}],["meta",{"property":"og:site_name","content":"星河个人博客"}],["meta",{"property":"og:title","content":"Nginx"}],["meta",{"property":"og:description","content":"Nginx ​ Nginx (engine x) 是一个高性能的HTTP和反向代理web服务器，同时也提供了IMAP/POP3/SMTP服务。Nginx是由伊戈尔·赛索耶夫为俄罗斯访问量第二的Rambler.ru站点（俄文：Рамблер）开发的，公开版本1.19.6发布于2020年12月15日。 1.正向代理 我们平时访问外网，通常响应比较慢，比如G..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-09-25T10:47:06.000Z"}],["meta",{"property":"article:tag","content":"圆"}],["meta",{"property":"article:tag","content":"小"}],["meta",{"property":"article:tag","content":"红"}],["meta",{"property":"article:published_time","content":"2022-01-09T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-09-25T10:47:06.000Z"}]]},"git":{"createdTime":1758708924000,"updatedTime":1758797226000,"contributors":[{"name":"xinghe23","username":"xinghe23","email":"2629110451@qq.com","commits":4,"url":"https://github.com/xinghe23"}]},"readingTime":{"minutes":1.77,"words":531},"filePathRelative":"posts/cherry.md","excerpt":"\\n<p>​\\t\\tNginx (engine x) 是一个高性能的HTTP和反向代理web服务器，同时也提供了IMAP/POP3/SMTP服务。Nginx是由伊戈尔·赛索耶夫为俄罗斯访问量第二的Rambler.ru站点（俄文：Рамблер）开发的，公开版本1.19.6发布于2020年12月15日。</p>\\n<h2>1.正向代理</h2>\\n<p>我们平时访问外网，通常响应比较慢，比如GitHub，我们自己的网络没办法访问，找一个可以访问GitHub的本地服务器，我们通过访问本地服务器去访问GitHub。这就是正向代理。</p>\\n<h2>2.反向代理</h2>\\n<p>像抖音，b站这些网站，他们的数据比较多，所有不止一台服务器，但是服务器中间session不共享，如果没有反向代理，我们就需要频繁的去登录，所有他们就专门搞了一台服务器，让其对用户的请求进行转发到他们的后台服务器，这样我们就不需要频繁的去登录了，这种找一个服务器给多台服务器去转发的就是反向代理。</p>","autoDesc":true}')}}]);